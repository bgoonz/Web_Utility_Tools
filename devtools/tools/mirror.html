<!DOCTYPE html>
<html lang="en">
  <head>
    <script>
      var deskAdsNum = 1;
    </script>
    <script async src="../lib/tagmng4.js"></script>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Webcam Mirror Online - See yourself on the screen</title>
    <meta
      content="Webcam mirror online. See yourself on the screen."
      name="description"
    />

    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
      integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2"
      crossorigin="anonymous"
    />
    <style>
      .adslot_4 {
        display: block;
        width: 160px;
        height: 600px;
        background: #111;
        position: absolute;
        left: 20px;
        top: 60px;
      }
      html,
      body {
        height: 100%;
        background: #d0d0d0;
      }
      #bread {
        padding: 10px 10px 10px 50px;
        background: #c0c0c0;
      }
      #bread,
      #bread a {
        font: large arial;
      }
      #bread a {
        color: #0000c0;
        padding: 8px;
      }
      #bread a:hover {
        background: #e0e0e0;
        text-decoration: none;
      }
      #wrapdiv {
        max-width: 830px;
        margin: 10px auto;
      }
      .alert {
        display: none;
      }
      /*.btn img { filter: invert(1); }*/
      #videodiv {
        overflow: hidden;
      }
      #vid {
        background: #aaa;
        z-index: 0;
        margin: 0 auto;
        margin-bottom: -5px;
        width: 100%;
        -webkit-transform: scaleX(-1);
        transform: scaleX(-1);
      }
      #imgid {
        display: none;
        margin: 0 auto;
      }
      #zoomRange {
        position: relative;
        left: 49%;
        transform: translateX(-50%);
        bottom: 50px;
        width: 70%;
      }
      #bar {
        position: fixed;
        left: 49%;
        transform: translateX(-50%);
        top: 50px;
      }
      #bar i {
        vertical-align: bottom;
      }
      .fullscreen {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        height: 100vh;
      }
      @media (min-width: 800px) {
        #msg {
          /*position:fixed; bottom:0;*/
          margin-top: -20px;
          margin-left: 10px;
        }
      }
      @media (min-width: 800px) and (max-width: 1200px) {
        #wrapdiv {
          margin-bottom: 0;
        }
        .adslot_4 {
          position: relative;
          width: 728px;
          height: 90px;
          margin: 0 auto;
          left: unset;
          top: unset;
        }
      }
      @media (max-width: 320px) {
        #invertbtn {
          display: none;
        }
      }
      @media (max-width: 800px) {
        .adslot_4 {
          display: none;
        }
        #msg {
          margin-top: 20px;
        }
        #wrapdiv {
          width: 100%;
          margin-top: 0;
        }
        #bread {
          padding-left: 10px;
        }
        /*#inbar { width:100%; }*/
        #blurbtn {
          display: none;
        }
        #bar {
          width: 100%;
          background: #6c757d;
          position: fixed;
          top: unset;
          bottom: 0;
          margin: 0 auto;
          margin-bottom: 0;
        }
        /*#bar .btn { padding:7px 30px; }*/
        #videodiv {
          border: 0 none;
        }
        #zoomRange {
          position: fixed;
          bottom: 70px;
        }
        #full,
        #blur {
          display: none;
        }
      }
      @media (min-width: 800px) {
        #bar .btn {
          margin-top: 30px;
          z-index: 1;
        }
        #videodiv {
          height: 477px;
          border: 17px solid #333;
          -webkit-border-radius: 50px;
          -moz-border-radius: 50px;
          border-radius: 50px;
        }
      }

      #banner {
        display: none;
        border-top: 1px #eee solid;
        font-size: 14px;
        position: fixed;
        z-index: 9999;
        left: 0;
        right: 0;
        bottom: 0;
        padding: 1em 1.8em;
        color: #333333;
        background: #f8f8f8;
      }
      #banner div {
        vertical-align: middle;
        display: inline-block;
        min-width: 300px;
      }
      #banner div:last-child {
        min-width: 320px;
        line-height: 40px;
      }
      #banner a {
        cursor: pointer;
        text-decoration: none;
      }
      #bansetbtn {
        padding: 12px 10px;
        margin-left: 20px;
        color: #333333;
        border: 1px #ccc solid;
        white-space: nowrap;
      }
      #banokbtn {
        padding: 12px 50px;
        margin-left: 20px;
        background: #8ec760;
        color: #fff;
        font-weight: bold;
      }
      #bansetbtn:hover {
        background: #e8e8e8;
      }
      #banokbtn:hover {
        background: #7eb750;
      }
      @media all and (max-width: 1000px) {
        #banner div:last-child {
          margin-top: 10px;
        }
        #banokbtn {
          margin-left: 0;
        }
      }
    </style>
  </head>
  <body>
    <div id="bread">
      <a href="../index.html">Home</a>&rsaquo;<a href="index.html">Tools</a
      >&rsaquo; Webcam Mirror Online
    </div>
    <div id="wrapdiv">
      <form id="mform">
        <div class="alert alert-warning" role="alert"></div>
        <div id="videodiv">
          <video id="vid" autoplay playsinline></video>
          <img
            id="imgid"
            src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="
            alt="Captured image"
          />
        </div>
        <div id="bar" class="btn-group">
          <button
            type="button"
            id="getimgbtn"
            title="Pause/Play"
            class="btn btn-secondary"
            disabled
          >
            <img
              src="../lib/icons/material/svg/pause_white_24dp.svg"
              loading="lazy"
              width="24"
              height="24"
              alt=""
            />
          </button>
          <button
            type="button"
            id="downimgbtn"
            title="Save"
            class="btn btn-secondary"
            disabled
          >
            <img
              src="../lib/icons/material/svg/save_alt_white_24dp.svg"
              loading="lazy"
              width="24"
              height="24"
              alt=""
            />
          </button>
          <button
            type="button"
            id="full"
            title="Fullscreen"
            onclick="fullscreen()"
            class="btn btn-secondary mr-2"
          >
            <img
              src="../lib/icons/material/svg/fullscreen_white_24dp.svg"
              loading="lazy"
              width="24"
              height="24"
              alt=""
            />
          </button>

          <div
            id="inbar"
            class="btn-group btn-group-toggle"
            data-toggle="buttons"
          >
            <button
              type="button"
              id="sepiabtn"
              title="Sepia"
              class="btn btn-secondary"
            >
              <img
                src="../lib/icons/material/svg/colorize_white_24dp.svg"
                loading="lazy"
                width="24"
                height="24"
                alt=""
              />
            </button>
            <button
              type="button"
              id="grayscalebtn"
              title="Grayscale"
              class="btn btn-secondary"
            >
              <img
                src="../lib/icons/material/svg/filter_vintage_white_24dp.svg"
                loading="lazy"
                width="24"
                height="24"
                alt=""
              />
            </button>
            <button
              type="button"
              id="invertbtn"
              title="Invert"
              class="btn btn-secondary"
            >
              <img
                src="../lib/icons/material/svg/invert_colors_white_24dp.svg"
                loading="lazy"
                width="24"
                height="24"
                alt=""
              />
            </button>
            <button
              type="button"
              id="contrastbtn"
              title="Contrast"
              class="btn btn-secondary"
            >
              <img
                src="../lib/icons/material/svg/brightness_medium_white_24dp.svg"
                loading="lazy"
                width="24"
                height="24"
                alt=""
              />
            </button>
            <button
              type="button"
              id="blurbtn"
              title="Blur"
              class="btn btn-secondary"
            >
              <img
                src="../lib/icons/material/svg/blur_on_white_24dp.svg"
                loading="lazy"
                width="24"
                height="24"
                alt=""
              />
            </button>
          </div>
          <button
            type="button"
            id="removebtn"
            title="Reset"
            class="btn btn-secondary"
          >
            <img
              src="../lib/icons/material/svg/clear_white_24dp.svg"
              loading="lazy"
              width="24"
              height="24"
              alt=""
            />
          </button>
        </div>
        <input type="range" class="custom-range" id="zoomRange" />
        <div id="msg">
          <img
            src="../lib/icons/material/svg/privacy_tip_black_24dp.svg"
            loading="lazy"
            width="24"
            height="24"
            alt=""
          />
          Privacy notice: The webcam video is generated locally by your browser
          and will not be sent to the server.
        </div>
      </form>
      <br />
      <p>How to use the webcam mirror:</p>
      <ul>
        <li>
          First allow webcam access by accepting the browser's access request or
          clicking the address bar's camera icon.
        </li>
        <li>Press the Pause button to capture image and disable webcam.</li>
        <li>
          Press the Download button to download image to the Downloads folder.
        </li>
        <li>Press the Fullscreen button to enlarge image.</li>
        <li>
          Press sepia/grayscale/invert/contrast/blur buttons to change image
          style.
        </li>
        <li>Press the &times; Reset button to clear the image styling.</li>
        <li>Click the zoom bar to zoom the image.</li>
      </ul>
    </div>

    <ins
      class="adsbygoogle adslot_4"
      data-ad-client="ca-pub-7356419691275579"
      data-ad-slot="5385900220"
    ></ins>
    <div id="banner">
  
    </div>
    <script src="../lib/utils/utils.js"></script>

    <script>
      !(function (e, t) {
        "object" == typeof exports && "undefined" != typeof module
          ? t()
          : "function" == typeof define && define.amd
          ? define(t)
          : t();
      })(0, function () {
        "use strict";
        function e(e) {
          var t = this.constructor;
          return this.then(
            function (n) {
              return t.resolve(e()).then(function () {
                return n;
              });
            },
            function (n) {
              return t.resolve(e()).then(function () {
                return t.reject(n);
              });
            }
          );
        }
        function t(e) {
          return new this(function (t, n) {
            function o(e, n) {
              if (n && ("object" == typeof n || "function" == typeof n)) {
                var f = n.then;
                if ("function" == typeof f)
                  return void f.call(
                    n,
                    function (t) {
                      o(e, t);
                    },
                    function (n) {
                      (r[e] = { status: "rejected", reason: n }),
                        0 == --i && t(r);
                    }
                  );
              }
              (r[e] = { status: "fulfilled", value: n }), 0 == --i && t(r);
            }
            if (!e || "undefined" == typeof e.length)
              return n(
                new TypeError(
                  typeof e +
                    " " +
                    e +
                    " is not iterable(cannot read property Symbol(Symbol.iterator))"
                )
              );
            var r = Array.prototype.slice.call(e);
            if (0 === r.length) return t([]);
            for (var i = r.length, f = 0; r.length > f; f++) o(f, r[f]);
          });
        }
        function n(e) {
          return !(!e || "undefined" == typeof e.length);
        }
        function o() {}
        function r(e) {
          if (!(this instanceof r))
            throw new TypeError("Promises must be constructed via new");
          if ("function" != typeof e) throw new TypeError("not a function");
          (this._state = 0),
            (this._handled = !1),
            (this._value = undefined),
            (this._deferreds = []),
            l(e, this);
        }
        function i(e, t) {
          for (; 3 === e._state; ) e = e._value;
          0 !== e._state
            ? ((e._handled = !0),
              r._immediateFn(function () {
                var n = 1 === e._state ? t.onFulfilled : t.onRejected;
                if (null !== n) {
                  var o;
                  try {
                    o = n(e._value);
                  } catch (r) {
                    return void u(t.promise, r);
                  }
                  f(t.promise, o);
                } else (1 === e._state ? f : u)(t.promise, e._value);
              }))
            : e._deferreds.push(t);
        }
        function f(e, t) {
          try {
            if (t === e)
              throw new TypeError("A promise cannot be resolved with itself.");
            if (t && ("object" == typeof t || "function" == typeof t)) {
              var n = t.then;
              if (t instanceof r)
                return (e._state = 3), (e._value = t), void c(e);
              if ("function" == typeof n)
                return void l(
                  (function (e, t) {
                    return function () {
                      e.apply(t, arguments);
                    };
                  })(n, t),
                  e
                );
            }
            (e._state = 1), (e._value = t), c(e);
          } catch (o) {
            u(e, o);
          }
        }
        function u(e, t) {
          (e._state = 2), (e._value = t), c(e);
        }
        function c(e) {
          2 === e._state &&
            0 === e._deferreds.length &&
            r._immediateFn(function () {
              e._handled || r._unhandledRejectionFn(e._value);
            });
          for (var t = 0, n = e._deferreds.length; n > t; t++)
            i(e, e._deferreds[t]);
          e._deferreds = null;
        }
        function l(e, t) {
          var n = !1;
          try {
            e(
              function (e) {
                n || ((n = !0), f(t, e));
              },
              function (e) {
                n || ((n = !0), u(t, e));
              }
            );
          } catch (o) {
            if (n) return;
            (n = !0), u(t, o);
          }
        }
        var a = setTimeout;
        (r.prototype["catch"] = function (e) {
          return this.then(null, e);
        }),
          (r.prototype.then = function (e, t) {
            var n = new this.constructor(o);
            return (
              i(
                this,
                new (function (e, t, n) {
                  (this.onFulfilled = "function" == typeof e ? e : null),
                    (this.onRejected = "function" == typeof t ? t : null),
                    (this.promise = n);
                })(e, t, n)
              ),
              n
            );
          }),
          (r.prototype["finally"] = e),
          (r.all = function (e) {
            return new r(function (t, o) {
              function r(e, n) {
                try {
                  if (n && ("object" == typeof n || "function" == typeof n)) {
                    var u = n.then;
                    if ("function" == typeof u)
                      return void u.call(
                        n,
                        function (t) {
                          r(e, t);
                        },
                        o
                      );
                  }
                  (i[e] = n), 0 == --f && t(i);
                } catch (c) {
                  o(c);
                }
              }
              if (!n(e))
                return o(new TypeError("Promise.all accepts an array"));
              var i = Array.prototype.slice.call(e);
              if (0 === i.length) return t([]);
              for (var f = i.length, u = 0; i.length > u; u++) r(u, i[u]);
            });
          }),
          (r.allSettled = t),
          (r.resolve = function (e) {
            return e && "object" == typeof e && e.constructor === r
              ? e
              : new r(function (t) {
                  t(e);
                });
          }),
          (r.reject = function (e) {
            return new r(function (t, n) {
              n(e);
            });
          }),
          (r.race = function (e) {
            return new r(function (t, o) {
              if (!n(e))
                return o(new TypeError("Promise.race accepts an array"));
              for (var i = 0, f = e.length; f > i; i++)
                r.resolve(e[i]).then(t, o);
            });
          }),
          (r._immediateFn =
            ("function" == typeof setImmediate &&
              function (e) {
                setImmediate(e);
              }) ||
            function (e) {
              a(e, 0);
            }),
          (r._unhandledRejectionFn = function (e) {
            void 0 !== console &&
              console &&
              console.warn("Possible Unhandled Promise Rejection:", e);
          });
        var s = (function () {
          if ("undefined" != typeof self) return self;
          if ("undefined" != typeof window) return window;
          if ("undefined" != typeof global) return global;
          throw Error("unable to locate global object");
        })();
        "function" != typeof s.Promise
          ? (s.Promise = r)
          : s.Promise.prototype["finally"]
          ? s.Promise.allSettled || (s.Promise.allSettled = t)
          : (s.Promise.prototype["finally"] = e);
      });
    </script>
    <script>
      "use strict";
      var filterstr = "";
      var isfullscreen = false;
      var captureState = false;
      var myTrack;
      var alertElem = document.getElementsByClassName("alert")[0];
      var fullElem = document.getElementById("full");
      var video = document.getElementById("vid");
      var canvas = document.createElement("canvas");
      var image = document.getElementById("imgid");
      var getimgbtn = document.getElementById("getimgbtn");
      var downimgbtn = document.getElementById("downimgbtn");
      var removebtn = document.getElementById("removebtn");
      var bar = document.getElementById("bar");
      var msg = document.getElementById("msg");
      var adslot = document.getElementsByClassName("adslot_4")[0];
      window.addEventListener("DOMContentLoaded", function () {
        getimgbtn.onclick = function () {
          getImage();
        };
        video.onclick = function () {
          getImage();
        };
        image.onclick = function () {
          getImage();
        };
        downimgbtn.onclick = function () {
          downloadImage();
        };
        sepiabtn.onclick = function () {
          setFilter("sepia(100%)");
        };
        grayscalebtn.onclick = function () {
          setFilter("grayscale(100%)");
        };
        invertbtn.onclick = function () {
          setFilter("invert(100%)");
        };
        contrastbtn.onclick = function () {
          setFilter("contrast(60%)");
        };
        blurbtn.onclick = function () {
          setFilter("blur(4px)");
        };
        removebtn.onclick = function () {
          setFilter("");
        };
        initPoly();
        initVideo();
      });
      function setFilter(f) {
        filterstr = f;
        video.style.setProperty("filter", f);
        image.style.setProperty("filter", f);
      }
      function initPoly() {
        if (navigator.mediaDevices === undefined) {
          navigator.mediaDevices = {};
        }
        if (navigator.mediaDevices.getUserMedia === undefined) {
          navigator.mediaDevices.getUserMedia = function (constraints) {
            var getUserMedia =
              navigator.webkitGetUserMedia || navigator.mozGetUserMedia;
            if (!getUserMedia) {
              return Promise.reject(
                new Error("getUserMedia is not implemented in this browser")
              );
            }
            return new Promise(function (resolve, reject) {
              getUserMedia.call(navigator, constraints, resolve, reject);
            });
          };
        }
      }
      function initSize() {
        var wwin = window.innerWidth;
        var hwin = window.innerHeight;
        var wvid = video.videoWidth;
        var hvid = video.videoHeight;
        var rect = video.getBoundingClientRect();
        var w = rect.width;
        var h = rect.height;
        var y = rect.y;
        // when height overflow
        if (y + h + 15 > hwin) {
          var hnew = hwin - y - 15;
          var wnew = (w * hnew) / h;
          video.style.setProperty("width", wnew);
          video.style.setProperty("height", hnew);
        }
      }
      function initVideo() {
        //const sleep = ms => new Promise(res => setTimeout(res, ms));
        //var constraints = { audio: false, video: { width: 1280, height: 720 } };
        var constraints = {
          audio: false,
          video: {
            width: { ideal: 4096 },
            height: { ideal: 2160 },
            //facingMode: { exact: "user" }
            facingMode: { ideal: "user" },
          },
        };
        navigator.mediaDevices
          .getUserMedia(constraints)
          .then(function (stream) {
            //.then(function success(stream) {
            //.then(async stream => {
            //video.srcObject = stream;
            if ("srcObject" in video) video.srcObject = stream;
            else video.src = window.URL.createObjectURL(stream);
            video.onloadedmetadata = function (e) {
              video.play();
              initSize();
            };

            //await sleep(1000);
            getimgbtn.disabled = false;
            const track = stream.getVideoTracks()[0];
            myTrack = track;
            const input = document.querySelector('input[type="range"]');
            if (track.getCapabilities === "function") {
              const capabilities = track.getCapabilities();
              //const settings = track.getSettings();
              if ("zoom" in capabilities) {
                input.min = capabilities.zoom.min;
                input.max = capabilities.zoom.max;
                input.step = capabilities.zoom.step;
                //input.value = settings.zoom;
                input.oninput = function (event) {
                  track.applyConstraints({
                    advanced: [{ zoom: event.target.value }],
                  });
                };
                input.hidden = false;
                var mid = (capabilities.zoom.min + capabilities.zoom.max) / 2;
                input.value = mid;
                track.applyConstraints({ advanced: [{ zoom: mid }] });
                return;
              }
            }
            input.min = "1";
            input.max = "3";
            input.step = "0.01";
            input.value = "1";
            input.hidden = false;
            input.oninput = function (event) {
              var v = event.target.value;
              document
                .getElementById("vid")
                .style.setProperty(
                  "transform",
                  "scaleX(-" + v + ") scaleY(" + v + ")"
                );
            };
          })
          .catch(function (err) {
            console.log(err.name + ": " + err.message);
            if (get_browser() == "Chrome") {
              setTimeout(function () {
                alertElem.innerHTML =
                  "The camera might be disabled - try to enable camera by clicking the camera icon on the browser's address bar and reload page!";
                alertElem.style.display = "block";
              }, 1500);
              bar.style.display = "none";
            }
          });
      }
      function getImage() {
        if (captureState == false) {
          captureState = true;
          var rect = vid.getBoundingClientRect();
          canvas.width = rect.width;
          canvas.height = rect.height;
          var ctx = canvas.getContext("2d");
          if (typeof ctx.filter !== "undefined") ctx.filter = filterstr;
          ctx.setTransform(-1, 0, 0, 1, canvas.width, 0);
          ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
          const dataURL = canvas.toDataURL("image/png");
          image.setAttribute("src", dataURL);
          myTrack.stop();
          video.style.display = "none";
          image.style.display = "block";
          zoomRange.style.display = "none";
          getimgbtn.children[0].src =
            "/lib/icons/material/svg/play_arrow_white_24dp.svg";
          downimgbtn.disabled = false;
          msg.style.setProperty("margin-top", "8px");
        } else {
          captureState = false;
          getimgbtn.disabled = true;
          initVideo();
          video.style.display = "block";
          image.style.display = "none";
          zoomRange.style.display = "block";
          getimgbtn.children[0].src =
            "/lib/icons/material/svg/pause_white_24dp.svg";
          downimgbtn.disabled = true;
          msg.style.setProperty("margin-top", "-10px");
        }
      }
      function downloadImage() {
        var a = document.createElement("a");
        a.download = "myimage.png";
        a.href = image.src;
        //a.href = canvas.toDataURL();
        //a.setAttribute("href", image.replace("image/png", "image/octet-stream"));
        a.click();
      }
      function fullscreen() {
        if (!isfullscreen) {
          isfullscreen = true;
          fullElem.children[0].src =
            "/lib/icons/material/svg/fullscreen_exit_white_24dp.svg";
          image.classList.add("fullscreen");
          video.classList.add("fullscreen");
          adslot.style.display = "none";
          document.body.style.overflow = "hidden";
        } else {
          isfullscreen = false;
          fullElem.children[0].src =
            "/lib/icons/material/svg/fullscreen_white_24dp.svg";
          image.classList.remove("fullscreen");
          video.classList.remove("fullscreen");
          adslot.style.display = "block";
          document.body.style.overflow = "visible";
        }
      }
    </script>
  </body>
</html>
